/**
* Get DWREMigrate Tool Version
*
* @output JSONData : Object
*
*/
importPackage( dw.system );

function execute( args : PipelineDictionary ) : Number
{
	var preferences : OrganizationPreferences = System.getPreferences();	
	
	var dwreMigrateCurrentVersion : String = null;
	var dwreMigrateToolVersion : String = null;
	var dwreMigrateVersionPath: String = null;
	
	
	if ("dwreMigrateToolVersion" in preferences.getCustom()) {
		dwreMigrateToolVersion = preferences.getCustom()["dwreMigrateToolVersion"];
	}
	if ("dwreMigrateCurrentVersion" in preferences.getCustom()) {
		dwreMigrateCurrentVersion = preferences.getCustom()["dwreMigrateCurrentVersion"];
	}
	if ("dwreMigrateVersionPath" in preferences.getCustom()) {
		dwreMigrateVersionPath = preferences.getCustom()["dwreMigrateVersionPath"];
	}
	
	args.JSONData = {
		"missingToolVersion" : dwreMigrateToolVersion === null,
		"toolVersion" : dwreMigrateToolVersion,
		"migrationVersion" : dwreMigrateCurrentVersion,
		"migrationPath" : dwreMigrateVersionPath
	};
	
	return PIPELET_NEXT;
}
